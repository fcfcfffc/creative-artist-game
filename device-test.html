<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¾å¤‡å…¼å®¹æ€§æµ‹è¯• - åˆ›ä½œä¸­çš„è‰ºæœ¯å®¶</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .device-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¨ åˆ›ä½œä¸­çš„è‰ºæœ¯å®¶ - è®¾å¤‡å…¼å®¹æ€§æµ‹è¯•</h1>
        
        <div class="device-info">
            <h3>è®¾å¤‡ä¿¡æ¯</h3>
            <div id="device-info"></div>
        </div>

        <div class="test-section">
            <h3>åŸºç¡€åŠŸèƒ½æµ‹è¯•</h3>
            <button onclick="testBasicFeatures()">è¿è¡ŒåŸºç¡€æµ‹è¯•</button>
            <div id="basic-results"></div>
        </div>

        <div class="test-section">
            <h3>è§¦æ‘¸åŠŸèƒ½æµ‹è¯•</h3>
            <button onclick="testTouchFeatures()">æµ‹è¯•è§¦æ‘¸åŠŸèƒ½</button>
            <div id="touch-results"></div>
        </div>

        <div class="test-section">
            <h3>å­˜å‚¨åŠŸèƒ½æµ‹è¯•</h3>
            <button onclick="testStorageFeatures()">æµ‹è¯•æœ¬åœ°å­˜å‚¨</button>
            <div id="storage-results"></div>
        </div>

        <div class="test-section">
            <h3>æ€§èƒ½æµ‹è¯•</h3>
            <button onclick="testPerformance()">æµ‹è¯•æ€§èƒ½</button>
            <div id="performance-results"></div>
        </div>

        <div class="test-section">
            <h3>æ¸¸æˆåŠŸèƒ½æµ‹è¯•</h3>
            <button onclick="window.open('index.html', '_blank')">æ‰“å¼€æ¸¸æˆè¿›è¡Œæ‰‹åŠ¨æµ‹è¯•</button>
            <div class="test-result info">
                <strong>æ‰‹åŠ¨æµ‹è¯•æ¸…å•ï¼š</strong><br>
                âœ“ ç”¨æˆ·æ³¨å†Œ/ç™»å½•<br>
                âœ“ ç”»å¸ƒç‚¹å‡»åˆ›ä½œ<br>
                âœ“ å¼€ç®±åŠ¨ç”»<br>
                âœ“ æ€ç»´å®«æ®¿å±•ç¤º<br>
                âœ“ AIæ–¹æ¡ˆç”Ÿæˆ<br>
                âœ“ æ¯æ—¥ä»»åŠ¡<br>
                âœ“ æ”¯ä»˜å¼¹çª—<br>
                âœ“ å“åº”å¼å¸ƒå±€
            </div>
        </div>
    </div>

    <script>
        // æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
        function showDeviceInfo() {
            const info = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                screenWidth: screen.width,
                screenHeight: screen.height,
                windowWidth: window.innerWidth,
                windowHeight: window.innerHeight,
                devicePixelRatio: window.devicePixelRatio || 1,
                touchSupport: 'ontouchstart' in window,
                orientation: screen.orientation ? screen.orientation.type : 'unknown'
            };

            document.getElementById('device-info').innerHTML = Object.entries(info)
                .map(([key, value]) => `<strong>${key}:</strong> ${value}`)
                .join('<br>');
        }

        // åŸºç¡€åŠŸèƒ½æµ‹è¯•
        function testBasicFeatures() {
            const results = [];
            const container = document.getElementById('basic-results');

            // JavaScriptæ”¯æŒ
            results.push({
                test: 'JavaScript ES6æ”¯æŒ',
                pass: typeof Promise !== 'undefined' && typeof Map !== 'undefined',
                message: 'ES6 Promiseå’ŒMapæ”¯æŒ'
            });

            // CSSæ”¯æŒ
            results.push({
                test: 'CSS Gridæ”¯æŒ',
                pass: CSS.supports('display', 'grid'),
                message: 'CSS Gridå¸ƒå±€æ”¯æŒ'
            });

            results.push({
                test: 'CSS Flexboxæ”¯æŒ',
                pass: CSS.supports('display', 'flex'),
                message: 'CSS Flexboxå¸ƒå±€æ”¯æŒ'
            });

            // Canvasæ”¯æŒ
            const canvas = document.createElement('canvas');
            results.push({
                test: 'Canvasæ”¯æŒ',
                pass: !!(canvas.getContext && canvas.getContext('2d')),
                message: 'HTML5 Canvasæ”¯æŒ'
            });

            // åŠ¨ç”»æ”¯æŒ
            results.push({
                test: 'CSSåŠ¨ç”»æ”¯æŒ',
                pass: CSS.supports('animation-name', 'test'),
                message: 'CSSåŠ¨ç”»å’Œè¿‡æ¸¡æ”¯æŒ'
            });

            displayResults(container, results);
        }

        // è§¦æ‘¸åŠŸèƒ½æµ‹è¯•
        function testTouchFeatures() {
            const results = [];
            const container = document.getElementById('touch-results');

            results.push({
                test: 'è§¦æ‘¸äº‹ä»¶æ”¯æŒ',
                pass: 'ontouchstart' in window,
                message: 'è§¦æ‘¸äº‹ä»¶APIæ”¯æŒ'
            });

            results.push({
                test: 'æŒ‡é’ˆäº‹ä»¶æ”¯æŒ',
                pass: 'onpointerdown' in window,
                message: 'æŒ‡é’ˆäº‹ä»¶APIæ”¯æŒ'
            });

            results.push({
                test: 'è§¦æ‘¸ç‚¹æ•°é‡',
                pass: navigator.maxTouchPoints > 0,
                message: `æœ€å¤§è§¦æ‘¸ç‚¹æ•°: ${navigator.maxTouchPoints || 0}`
            });

            results.push({
                test: 'è®¾å¤‡æ–¹å‘æ”¯æŒ',
                pass: 'orientation' in window || 'onorientationchange' in window,
                message: 'è®¾å¤‡æ–¹å‘å˜åŒ–æ£€æµ‹'
            });

            displayResults(container, results);
        }

        // å­˜å‚¨åŠŸèƒ½æµ‹è¯•
        function testStorageFeatures() {
            const results = [];
            const container = document.getElementById('storage-results');

            // localStorageæµ‹è¯•
            try {
                localStorage.setItem('test', 'value');
                const value = localStorage.getItem('test');
                localStorage.removeItem('test');
                results.push({
                    test: 'localStorageæ”¯æŒ',
                    pass: value === 'value',
                    message: 'æœ¬åœ°å­˜å‚¨è¯»å†™æ­£å¸¸'
                });
            } catch (e) {
                results.push({
                    test: 'localStorageæ”¯æŒ',
                    pass: false,
                    message: 'æœ¬åœ°å­˜å‚¨ä¸å¯ç”¨: ' + e.message
                });
            }

            // sessionStorageæµ‹è¯•
            try {
                sessionStorage.setItem('test', 'value');
                const value = sessionStorage.getItem('test');
                sessionStorage.removeItem('test');
                results.push({
                    test: 'sessionStorageæ”¯æŒ',
                    pass: value === 'value',
                    message: 'ä¼šè¯å­˜å‚¨è¯»å†™æ­£å¸¸'
                });
            } catch (e) {
                results.push({
                    test: 'sessionStorageæ”¯æŒ',
                    pass: false,
                    message: 'ä¼šè¯å­˜å‚¨ä¸å¯ç”¨: ' + e.message
                });
            }

            displayResults(container, results);
        }

        // æ€§èƒ½æµ‹è¯•
        function testPerformance() {
            const results = [];
            const container = document.getElementById('performance-results');

            // Performance API
            results.push({
                test: 'Performance APIæ”¯æŒ',
                pass: 'performance' in window && 'now' in performance,
                message: 'æ€§èƒ½ç›‘æ§APIæ”¯æŒ'
            });

            // RequestAnimationFrame
            results.push({
                test: 'RequestAnimationFrameæ”¯æŒ',
                pass: 'requestAnimationFrame' in window,
                message: 'åŠ¨ç”»å¸§APIæ”¯æŒ'
            });

            // å†…å­˜ä¿¡æ¯ï¼ˆå¦‚æœå¯ç”¨ï¼‰
            if ('memory' in performance) {
                const memory = performance.memory;
                results.push({
                    test: 'å†…å­˜ä¿¡æ¯',
                    pass: true,
                    message: `å·²ç”¨: ${Math.round(memory.usedJSHeapSize / 1024 / 1024)}MB, æ€»è®¡: ${Math.round(memory.totalJSHeapSize / 1024 / 1024)}MB`
                });
            }

            // ç®€å•æ€§èƒ½æµ‹è¯•
            const start = performance.now();
            for (let i = 0; i < 100000; i++) {
                Math.random();
            }
            const end = performance.now();
            const duration = end - start;

            results.push({
                test: 'JavaScriptæ‰§è¡Œæ€§èƒ½',
                pass: duration < 100,
                message: `10ä¸‡æ¬¡éšæœºæ•°ç”Ÿæˆè€—æ—¶: ${duration.toFixed(2)}ms`
            });

            displayResults(container, results);
        }

        // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
        function displayResults(container, results) {
            container.innerHTML = results.map(result => 
                `<div class="test-result ${result.pass ? 'pass' : 'fail'}">
                    <strong>${result.test}:</strong> ${result.pass ? 'âœ“ é€šè¿‡' : 'âœ— å¤±è´¥'} - ${result.message}
                </div>`
            ).join('');
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
        window.addEventListener('load', showDeviceInfo);
    </script>
</body>
</html>